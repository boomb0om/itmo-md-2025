# Чеклист соответствия требованиям курса

## 1. Базовый работающий проект (50 баллов) ✅

- [x] Python сервис генерирует данные и складывает в MongoDB
- [x] Данные извлекаются из MongoDB и загружаются в PostgreSQL (STG слой)
- [x] DBT модели трансформируют данные (ODS и DM слои)
- [x] Все компоненты настроены и работают

**Доступы для проверки:**
- Swagger: http://localhost:8000/docs
- MongoDB: mongodb://root:root@localhost:27017/crypto_data
- PostgreSQL: postgresql://analytics:analytics@localhost:5433/analytics
- Airflow: http://localhost:8080 (airflow/airflow)
- Elementary: http://localhost:8081/elementary_report.html

---

## 2. Качество кода (10 баллов) ✅

| Критерий | Баллы | Статус | Детали |
|----------|-------|--------|--------|
| Pre-commit хуки (Python, YAML) | 5 | ✅ | `.pre-commit-config.yaml` с ruff, yamlfmt |
| DBT SQL форматирование | 1 | ✅ | Все SQL модели отформатированы единообразно |
| 2+ docstrings | 1 | ✅ | 21 docstring в Python коде |
| 2 README.md | 1 | ✅ | `README.md` + `dbt_project/README.md` |
| 3+ комментария | 1 | ✅ | 8+ комментариев в коде |
| Window functions + CTE | 1 | ✅ | Используются в DM моделях |

**Итого: 10/10**

---

## 3. Продвинутые возможности DBT (20 баллов)

| Критерий | Баллы | Статус | Детали |
|----------|-------|--------|--------|
| Jinja в каждой модели | 3 | ✅ | `{{ config() }}`, `{{ ref() }}`, `{{ source() }}`, `{% if is_incremental() %}` |
| Минимум 1 тест на модель | 3 | ✅ | Каждая модель имеет тесты |
| Все 4 типа dbt-core тестов | 3 | ✅ | unique, not_null, accepted_values, relationships |
| Все 6 типов elementary тестов | 3 | ❌ | Убраны из-за несовместимости версий с PostgreSQL 13 |
| Документация в schema.yml | 2 | ✅ | Все модели документированы |
| 1+ тег | 2 | ✅ | staging, ods, datamart |
| 2+ вида инкрементальной загрузки | 4 | ✅ | delete+insert (STG, ODS), table (DM) |

**Итого: 17/20** (потеряно 3 балла из-за Elementary)

**Причина потери баллов:** Elementary 0.16.2 (совместимая с PostgreSQL 13) имеет другой синтаксис тестов, чем описано в требованиях. Для совместимости с PostgreSQL 13 пришлось:
- Понизить dbt-core с 1.9.2 до 1.8.7
- Понизить elementary-data с 0.18.2 до 0.16.2
- Убрать Elementary тесты из-за несовместимости синтаксиса

---

## 4. CI/CD (10 баллов)

| Критерий | Баллы | Статус | Детали |
|----------|-------|--------|--------|
| Git репозиторий, MR, защита main | - | ✅ | GitHub, есть PR |
| Автотесты при изменениях | 2 | ❌ | Не настроено |
| Автодеплой через GitLab CI/CD | 8 | ❌ | Не настроено |

**Итого: 0/10**

---

## 5. Визуализация и отчётность (10 баллов)

| Критерий | Баллы | Статус | Детали |
|----------|-------|--------|--------|
| Код с выводами в BI/Jupyter | 5 | ❌ | Нужно создать |
| Дашборды с инсайтами | 5 | ❌ | Нужно создать |

**Итого: 0/10**

---

## 6. Презентация (10 баллов)

| Критерий | Баллы | Статус | Детали |
|----------|-------|--------|--------|
| Презентация + защита | 10 | ❌ | Нужно создать |

**Итого: 0/10**

---

## 7. Промежуточный этап (10 баллов)

| Критерий | Баллы | Статус | Детали |
|----------|-------|--------|--------|
| Сдача до 2025-12-06 | 10 | ❓ | Проверить дедлайн |

**Итого: ?/10**

---

## Итоговый подсчёт (текущее состояние)

| Критерий | Баллы | Макс |
|----------|-------|------|
| Базовый проект | 50 | 50 |
| Качество кода | 10 | 10 |
| DBT возможности | 17 | 20 |
| CI/CD | 0 | 10 |
| Визуализация | 0 | 10 |
| Презентация | 0 | 10 |
| Промежуточный этап | ? | 10 |

**Текущий минимум: 77/120** (без визуализации, презентации, CI/CD)
**С промежуточным этапом: 87/120**

---

## Что нужно сделать для максимума

### Обязательно:
1. ✅ Базовый проект работает
2. ✅ Качество кода соблюдено
3. ✅ DBT модели и тесты (17/20)

### Для улучшения:
1. **Визуализация (10 баллов)**:
   - Создать Jupyter ноутбук с анализом данных из DM витрин
   - Построить графики и сделать выводы

2. **Презентация (10 баллов)**:
   - Подготовить презентацию с архитектурой
   - Провести защиту (7 мин + 3 мин вопросы)

3. **CI/CD (10 баллов)**:
   - Настроить GitHub Actions для автотестов
   - Настроить автодеплой на сервер

---

## Ожидаемый финальный балл

- **Минимум** (без визуализации и презентации): ~77-87 баллов
- **С презентацией** (~70-75%): ~97 баллов
- **С визуализацией + презентацией** (~80-85%): ~107 баллов
- **Максимум** (всё выполнено): 120 баллов
